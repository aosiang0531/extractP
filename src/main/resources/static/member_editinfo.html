<!DOCTYPE html>
<html lang="zh-Hant">

<head>
	<title>萃．練</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">

	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">

	<link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
	<link rel="stylesheet" href="css/animate.css">

	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	<link rel="stylesheet" href="css/magnific-popup.css">

	<link rel="stylesheet" href="css/aos.css">

	<link rel="stylesheet" href="css/ionicons.min.css">

	<link rel="stylesheet" href="css/bootstrap-datepicker.css">
	<link rel="stylesheet" href="css/jquery.timepicker.css">


	<link rel="stylesheet" href="css/flaticon.css">
	<link rel="stylesheet" href="css/icomoon.css">
	<link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/member_editinfo.css">
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
		<div class="container">
			<img src="images/logo.png" alt="Logo" width="130" height="60" class="d-inline-block align-text-top">
			<a class="navbar-brand" href="index.html"></small></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
				aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="oi oi-menu"></span> 選單
			</button>
			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item active"><a href="index.html" class="nav-link">咖啡論壇</a></li>
					<li class="nav-item"><a href="menu.html" class="nav-link">課程活動</a></li>
					<li class="nav-item"><a href="services.html" class="nav-link">咖啡地圖</a></li>
					<li class="nav-item"><a href="blog.html" class="nav-link">咖啡商城</a></li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="room.html" id="dropdown04" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false">個人頁面</a>
						<div class="dropdown-menu" aria-labelledby="dropdown04">
							<a class="dropdown-item" href="shop.html">Shop</a>
							<a class="dropdown-item" href="product-single.html">Single Product</a>
							<a class="dropdown-item" href="room.html">Cart</a>
							<a class="dropdown-item" href="checkout.html">Checkout</a>
						</div>
					</li>
					<li class="nav-item cart"><a href="cart.html" class="nav-link"><span
								class="icon icon-shopping_cart"></span><span
								class="bag d-flex justify-content-center align-items-center"><small>1</small></span></a>
					</li>
					<li class="nav-item cart"><a href="member_login.html" class="nav-link"><span
								class="icon icon-user"></span></a>
					</li>

				</ul>
			</div>
		</div>
	</nav>
	<!-- END nav -->

	<!-- Start Content -->

	<section class="ftco-section ftco-white"> <!-- ftco-white套用自訂白色背景 -->
		<div class="container">
			<div class="row">
                <div class="container">
                    <div class="row gutters">
                    <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="account-settings">
                                <div class="user-profile">
                                    <div class="user-avatar">
                                        <img id="img" src="images/300.jpg" alt="Maxwell Admin">
                                    </div>
                                    <h2 class="user-name">Yuki Hayashi</h2>
                                    <div class="file">
                                        <input type="file" id="file" accept="image/*">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    </div>
                    <div class="col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="row gutters">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                    <h5 class="mb-2 text-primary">個人資料</h5>
                                </div>

                                <div class="input">
                                    <label class="input-label">用戶名稱</label>
                                    <input type="text" name="memberName" class="input-field" value="" required/>  
                                </div>
                                <div class="input">
                                    <label class="input-label">手機號碼</label>
                                    <input type="tel" name="memberPhone" class="input-field" value="" required/>
                                </div>
                                <div class="input">
                                    <label class="input-label">電子信箱</label>
                                    <input type="text" name="memberEmail" class="input-field" value="" required/>
                                 </div>

                            </div>

                            <div class="row gutters">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                    <div class="text-right">
                                        
                                        <button type="button" id="update" name="submit" class="btn btn-primary">更新</button>
										<button type="button" id="cancel" name="submit" class="btn btn-secondary">回上頁</button>
									</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    </div>
                    </div>
                
			</div>
		</div>
	</section>
	<!-- End Content -->


	<!-- Start Footer -->
	<footer class="bg-dark" id="tempaltemo_footer">
		<div class="w-100 bg-black py-3">
			<div class="container">
				<div class="row pt-2">
					<div class="col-12">
						<p class="text-left text-light">
							Copyright &copy; 2023 TibaMe THA101-Team7 萃．練
						</p>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- End Footer -->


	<!-- loader -->
	<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
			<circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
			<circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
				stroke="#F96D00" />
		</svg></div>


	<script src="js/jquery.min.js"></script>
	<script src="js/jquery-migrate-3.0.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script src="js/jquery.waypoints.min.js"></script>
	<script src="js/jquery.stellar.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/aos.js"></script>
	<script src="js/jquery.animateNumber.min.js"></script>
	<script src="js/bootstrap-datepicker.js"></script>
	<script src="js/jquery.timepicker.min.js"></script>
	<script src="js/scrollax.min.js"></script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script src="js/google-map.js"></script>
	<script src="js/main.js"></script>


<script>
  $(document).ready(function() {
  // 頁面加載時執行的操作
  var memberId = 17; // 請替換為真實的會員ID

  // 構建後端端點URL並替換會員ID
  var url = "member/{id}".replace("{id}", memberId);

  // 發送AJAX請求獲取會員資料
  $.ajax({
    url: url,
    type: "GET",
    success: function(response) {
      // 將會員資料顯示在相應的input元素中
      $("input[name='memberName']").val(response.name);
      $("input[name='memberPhone']").val(response.phone);
      $("input[name='memberEmail']").val(response.email);
    },
    error: function(error) {
      console.log("獲取會員資料失敗");
    }
  });
});
</script>

<script>
  $(document).ready(function() {
  // 監聽更新按鈕的點擊事件
  $("#update").click(function() {
    e.stopPropagation();

    
    
    // 獲取會員ID
    var memberId = 17; // 請替換為真實的會員ID

    // 構建後端端點URL並替換會員ID
    var url = "member/{id}".replace("{id}", memberId);

    // 獲取表單數據
    var memberName = $("input[name='memberName']").val();
    var memberPhone = $("input[name='memberPhone']").val();
    var memberEmail = $("input[name='memberEmail']").val();
    

    // 構建要發送的數據
    var data = {
      name: memberName,
      phone: memberPhone,
      email: memberEmail,
      image : memberImage
    };

    msg.textContent = '';
    const fileReader = new FileReader();
    fileReader.addEventListener('load', e => {
    const memberImage = e.target.result.split(',')[1]; //去掉base64編碼逗號前面
    // 發送AJAX請求
      $.ajax({
        url: url,
        type: "PUT",
        data: JSON.stringify(data),
        contentType: "application/json",
        success: function(response) {
          // 更新成功後的處理邏輯
          console.log("更新成功");
        },
        error: function(error) {
          // 更新失敗後的處理邏輯
          console.log("更新失敗");
        }
      });
      
    });
    fileReader.readAsDataURL(memberImage.files[0]);
  });
});

</script>

<script>
  $(document).ready(function() {
    $('#cancel').click(function(e) {
      e.stopPropagation();
      window.location.href = 'member_personalpage.html'; // 替換為個人頁面的URL
    });
  });
</script>



</body>

</html>